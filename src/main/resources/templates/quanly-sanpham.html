<!DOCTYPE html>
<html xmlns:th="https://thymeleaf.org">

<head>
<title>Quản Lý Sản Phẩm</title>
<div th:replace="/header :: header"></div>

<style type="text/css">
.searchCol {
	margin-bottom: 30px;
}

.summary {
	background-color: #fff !important;
}

.add {
	margin-left: 800px;
}

.btn-delete, .btn-edit {
	border: none;
	color: white;
	text-align: center;
	font-size: 16px;
	margin: 4px 2px;
}
</style>
</head>

<body class="body-custom">
	<div th:replace="/header :: navbar"></div>
	<div th:replace="/quanly :: navbar"></div>
	<main class="page shopping-cart-page">
		<section class="clean-block clean-cart dark">
			<div class="container">
				<div class="block-heading" style="padding-top: 0px">
					<h1></h1>
					<h2 class="text-info">Quản lý sản phẩm</h2>
				</div>
				<div class="content">
					<div class="col-md-12 col-lg-12">
						<div class="items">
							<div class="searchCol">
								<form class="form-inline mr-auto" target="_self">
									<div class="form-group">
										<label for="search-field">Tên sản phẩm</label><input
											class="form-control search-field" type="search" name="name"
											id="search-field">
									</div>
									<button type="submit" th:action="@{/quanly/sanpham/{name}'(name=${name})}"
									class="btn btn-primary">Search</button>
									<button class="btn btn-primary" type="button"
										style="margin-left: 170px;" data-toggle="modal"
										data-target=".inputmodal">Thêm sản phẩm</button>
								</form>

							</div>
							<div class="">
								<table id="quanlysanphamTable" class="table">
									<thead>
										<tr>
											<th>Image</th>
											<th>ID</th>
											<th>Products</th>
											<th>Description</th>
											<th>Type</th>
											<th>Year</th>
											<th>Price</th>
											<th>Action</th>
										</tr>
									</thead>
									<tbody>
										<tr th:each="sanpham,idx : ${listSanPham}">
											<td><img th:src="@{${sanpham.imgURL}}" alt="" border=3
												height=100 width=100></img></td>
											<td th:text="${sanpham.maSanPham}"></td>
											<td th:text="${sanpham.tenSanPham}"></td>
											<td th:text="${sanpham.moTa}"></td>
											<td th:text="${sanpham.nhaSanXuat.tenNhaSanXuat}"></td>
											<td th:text="${sanpham.namSanXuat}"></td>
											<td th:text="${sanpham.donGia+'00VND'}"></td>
											<td><div class="modal fade inputmodal1" tabindex="-1"
													role="dialog" aria-hidden="true" id="inputmodal1"
													th:attrappend="id=${idx.index}">
													<div class="modal-dialog">
														<div class="modal-content">
															<div class="modal-header">
																<h5 class="modal-title">Sản phẩm</h5>
															</div>
															<div class="modal-body">
																<div class="container">
																	<div class="row">
																		<div class="col">
																			<form
																				th:action="@{'/quanly/sanpham/edit/{id}'(id=${sanpham.maSanPham})}"
																				th:object="${sanPhamEdit}" method="post"
																				id="formEditSanPham">
																				<div class="form-group">
																					<label for="tenSanPham">Tên sản phẩm</label> <input
																						type="text" class="form-control" id="tenSanPham"
																						name="tenSanPham" th:value="${sanpham.tenSanPham}">

																				</div>
																				<div class="form-group">
																					<label for="moTa">Mô tả</label> <input type="text"
																						class="form-control" id="moTa" name="moTa"
																						th:value="${sanpham.moTa}">


																				</div>
																				<div class="form-group">
																					<label for="donGia">Đơn giá</label> <input
																						type="text" class="form-control" id="donGia"
																						name="donGia" th:value="${sanpham.donGia}">

																				</div>
																				<div class="form-group">
																					<label for="namSanXuat">Năm sản xuất</label> <input
																						type="number" class="form-control" id="namSanXuat"
																						name="namSanXuat" th:value="${sanpham.namSanXuat}">

																				</div>
																			</form>
																		</div>
																	</div>
																</div>
															</div>
															<div class="modal-footer">
																<button type="submit" th:action="@{/quanly/sanpham/}"
																	form="formEditSanPham" class="btn btn-primary">Lưu</button>
																<button type="submit" class="btn btn-danger"
																	data-dismiss="modal">Cancel</button>
															</div>
														</div>
													</div>
												</div> <!-- Modal -->
												<div class="modal fade" id="deleteItem" tabindex="-1"
													role="dialog" aria-labelledby="deleteItem"
													th:attrappend="id=${idx.index}" aria-hidden="true">
													<div class="modal-dialog" role="document">
														<div class="modal-content">
															<div class="modal-header">
																<h5 class="modal-title" id="exampleModalLabel">Delete
																	Product</h5>
																<button type="button" class="close" data-dismiss="modal"
																	aria-label="Close">
																	<span aria-hidden="true">&times;</span>
																</button>
															</div>
															<div class="modal-body">Are you want to delete this
																?</div>
															<div class="modal-footer">
																<button type="button" class="btn btn-secondary"
																	data-dismiss="modal">No</button>
																<form action="#"
																	th:action="@{'/quanly/sanpham/delete/{id}'(id=${sanpham.maSanPham})}"
																	th:method="delete">
																	<button type="submit" class="btn btn-primary">Yes</button>
																</form>
															</div>
														</div>
													</div>
												</div>



												<div style="display: flex;">
													<div class="btn-edit">
														<form action="@{/quanly/sanpham}"
															th:action="@{'/quanly/sanpham/edit/'(id=${sanpham.maSanPham})}"
															th:method="POST" th:object="${modalupdatesanpham}">
															<button type="button" id="editButton"
																class="btn btn-info btn-md" data-toggle="modal"
																data-target="#inputmodal1"
																th:attrappend="data-target=${idx.index}">Edit</button>

														</form>
													</div>
													<div class="btn-delete">
														<form action="#"
															th:action="@{'/quanly/sanpham/delete/{id}'(id=${sanpham.maSanPham})}"
															th:method="delete">
															<button type="button" class="btn btn-danger"
																data-toggle="modal" data-target="#deleteItem"
																th:attrappend="data-target=${idx.index}">
																Delete</button>
														</form>
													</div>
												</div></td>
										</tr>
									</tbody>
								</table>
							</div>
							<nav>
								<ul class="pagination">
									<li class="page-item" th:each="pageNumber : ${pageNumbers}"><a
										class="page-link"
										th:href="@{/quanly/sanpham(page=${pageNumber})}"
										th:text=${pageNumber}></a></li>
								</ul>
							</nav>
						</div>
					</div>
				</div>
			</div>
		</section>
	</main>
	<!-- Modal -->
	<div class="modal fade inputmodal" tabindex="-1" role="dialog"
		aria-labelledby="inputmodal" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Nhập sản phẩm</h5>
				</div>
				<div class="modal-body">
					<div class="container">
						<div class="row">
							<div class="col">
								<form th:action="@{/quanly/sanpham}" th:object="${modalsanpham}"
									method="post" id="formSanPham">
									<div class="form-group">
										<label for="tenSanPham">Tên sản phẩm</label> <input
											type="text" class="form-control" id="tenSanPham"
											th:field="*{tenSanPham}">
									</div>
									<div class="form-group">
										<label for="moTa">Mô tả</label> <input type="text"
											class="form-control" id="moTa" th:field="*{moTa}">

									</div>
									<div class="form-group">
										<label for="donGia">Đơn giá</label> <input type="text"
											class="form-control" id="donGia" th:field="*{donGia}">
									</div>
									<div class="dropdown">
										<label for="nhaSanXuat">Nhà sản xuất</label> <select id="nsx"
											class="form-control" th:field="*{nhaSanXuat.maNhaSanXuat}">
										</select>
									</div>
									<div class="form-group">
										<label for="namSanXuat">Năm sản xuất</label> <input
											type="number" class="form-control" id="namSanXuat"
											th:field="*{namSanXuat}">
									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<button type="submit" th:action="@{/quanly/sanpham}"
						form="formSanPham" class="btn btn-primary">Lưu</button>
					<button type="submit" class="btn btn-danger" data-dismiss="modal">Cancel</button>
				</div>
			</div>

		</div>
	</div>

	<footer>
		<div th:replace="/header :: footer"></div>
	</footer>
</body>

</html>